intro to MSF
・MSFは、世界中のペンテスターやセキュリティ研究者によって使用されるオープンソースで強力なペンテスおよびエクスプロイトフレームワーク
・ペンテストのライフサイクルを自動化するための堅牢なインフラを提供する。
・エクスプロイトの開発とテストにも使用でき、世界最大級の公開、検証済みエクスプロイトのデータベースを持っている
・・MSFはモジュール構造で設計されていおり、新しい機能を容易に追加、実装できる

・MSFconsoleは、MSFのすべての機能にアクセスできる使いやすいオールインワン型のインターフェース

・Armitageは、MSF用の無料のJavaベースGUIフロントエンドで、ネットワークの発見、エクスプロイト、ポストエクスプロイトを簡素化する

MFS アーキテクチャ
・MSFモジュールは以下のものである
1) exploit：脆弱性をつくために使用するモジュール。通常はペイロードと組み合わせて使う
2) payload：エクスプロイト成功後にターゲット上でリモート実行できるコード
3) encoder：ペイロードをアンチウイルス検出を回避するためにエンコードするために使う。
4) NOPS：ペイロードのサイズを一定に保ち、実行時の安定性を確保するために使用する
5) Auxiliary：ポートスキャンや列挙など追加的な機能を実行するために使用されるモジュール

・msf moduleは、Rubyで書かれている。

・エクスプロイトを使用するとき、option(payload)には以下の２種類が設定できる。
1) Non-Staged Payload
・エクスプロイトと一緒にそのままターゲットシステムへ送信されるペイロード
2) Staged Payload
・ステージ型ペイロードは2つの部分に分けてターゲットに送信される
-stager（最初の部分)は、攻撃者へのリバース接続を確立するためのペイロードを含み
-その後、stage(2つ目の部分）をダウンロードして実行する

・Stagerは通常、攻撃者とターゲット間の安定した通信チャネルを確立するために使用され、その後ステージ型ペイロードがダウンロードされてターゲットシステム上で実行される。
・Stageは、Staagerによってダウンロードされるペイロードの要素

・meterpreterペイロードは、高度で多機能なペイロードで、ターゲットシステムのメモリ上で実行されるため検出が困難
・これはStegerソケットを介して通信し、攻撃者に対してターゲット上で対話型のコマンドインタプリタを提供する。
これによりシステムコマンドの実行、ファイルシステムの操作、キーロギングなど多くの機能が利用可能

MSFを使用したペンテス
・MSFは、ペンテスのライフサイクルに含まれる様々なタスクを実行し、自動化するために使用する。

・PTES(ペンテス実行基準）は、包括的かつ最新のペンテス標準の必要性に対処することを目的として情報セキュリティ実務者のチームによって開発されたペンテスの手法

MSFの基礎
MSFのインストールと設定
・MSFは、Rapid7によって配布され、WindowsとLinuxの両方でスタンドアロンパッケージとしてダウンロードおよびインストールできる

・メタスプロイトフレームワークデータベース(msfdb)はメタスプロイトフレームワークの重要な構成要素であり、すべての評価やホストデータのスキャン等を記録・管理するために使用できる
・MSFは主要なデータベースサーバとしてpostpresqlを使用する。
そのため、postpresqlデータベースサービスが稼働しており、正しく設定されていることを確認する。
・msfdbは、nmapのような各種サードパーティツールからスキャンの結果のインポートと保存も可能

MSFworkspace
・ワークスペースを使うことで、すべてのホスト、スキャン、アクティビティを追跡できる。
ペンテストを行う際に非常に便利で、ターゲットや組織ごとにデータを整理・分類できる
・MSFconsoleでは、複数のワークスペースを作成、管理、切り替える機能が提供される
・


